<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="/favicon.ico">

  <title>
  Java Socket TCP cơ bản: Client/Server và giao thức thông điệp đơn giản - Blog Lập Trình Mạng
  </title>
  <meta name="description" content="

  
  

Bắt đầu với lập trình mạng bằng Java: tạo TCP server/client, quy ước thông điệp, xử lý đóng kết nối an toàn.
Từ khoá: Java, Networking, TCP, Socket.
Trong bài viết này, mình đi theo hướng thực chiến: giải thích ngắn gọn, kèm checklist, bẫy thường gặp và ví dụ code để bạn có thể áp dụng ngay vào dự án.
1) Mô hình Client/Server &amp; giao thức

Server mở port (ví dụ 8080), chấp nhận kết nối mới và tạo luồng đọc/ghi cho từng client.
Client kết nối host:port, gửi thông điệp theo một quy ước (protocol) đơn giản để 2 bên hiểu nhau.
Chọn delimiter (\n) hoặc length-prefix (gửi trước độ dài) để tránh dính/chia gói.

2) Ví dụ server tối giản (Java)
import java.io.*;
import java.net.*;
public class EchoServer {
  public static void main(String[] args) throws Exception {
    try (ServerSocket ss = new ServerSocket(8080)) {
      System.out.println(&#34;Listening on 8080&#34;);
      while (true) {
        Socket s = ss.accept();
        new Thread(() -&gt; handle(s)).start();
      }
    }
  }
  static void handle(Socket s) {
    try (s;
      BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      PrintWriter out = new PrintWriter(s.getOutputStream(), true)) {
      String line;
      while ((line = in.readLine()) != null) {
        if (&#34;quit&#34;.equalsIgnoreCase(line)) break;
        out.println(&#34;echo:&#34; &#43; line);
      }
    } catch (IOException e) { e.printStackTrace(); }
  }
}
3) Client
import java.io.*;
import java.net.*;
public class EchoClient {
  public static void main(String[] args) throws Exception {
    try (Socket s = new Socket(&#34;127.0.0.1&#34;, 8080);
         BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
         PrintWriter out = new PrintWriter(s.getOutputStream(), true)) {
      out.println(&#34;hello&#34;);
      System.out.println(in.readLine());
    }
  }
}
4) Checklist an toàn

Timeout đọc/ghi; đóng tài nguyên với try-with-resources.
Ghi log có request-id để trace.
Định nghĩa rõ protocol từ đầu; có phiên bản (v1, v2) để nâng cấp.

Best-practices nhanh

Ghi log có cấu trúc (JSON) &#43; traceId.
Timeout hợp lý cho connect/read/write; tổng timeout (deadline) khi cần.
Chuẩn hoá lỗi cho client; đừng lộ stacktrace ra ngoài.
Viết kiểm thử với trường hợp lỗi (timeout, 429, 5xx), không chỉ thành công.

Checklist áp dụng

 Thiết kế protocol hoặc schema API rõ ràng.
 Thêm retry/backoff có điều kiện.
 Quan sát (metrics/log/trace) đầy đủ.
 Tài liệu hoá ví dụ request/response (hoặc mock contract).

Kết luận
Những nguyên tắc ở trên đủ để bạn triển khai và mở rộng trong bối cảnh dự án thực tế. Hãy clone lại ví dụ, chạy thử, thêm log và đo đạc; mọi tối ưu đều bắt đầu từ quan sát." /><meta name="generator" content="Hugo 0.151.0">
  <link rel="stylesheet" href="/css/styles.css" />
  
  

  <meta property="og:url" content="http://localhost:1313/blog/java-socket-tcp-co-ban/">
  <meta property="og:site_name" content="Blog Lập Trình Mạng">
  <meta property="og:title" content="Java Socket TCP cơ bản: Client/Server và giao thức thông điệp đơn giản">
  <meta property="og:description" content="Bắt đầu với lập trình mạng bằng Java: tạo TCP server/client, quy ước thông điệp, xử lý đóng kết nối an toàn.
Từ khoá: Java, Networking, TCP, Socket.
Trong bài viết này, mình đi theo hướng thực chiến: giải thích ngắn gọn, kèm checklist, bẫy thường gặp và ví dụ code để bạn có thể áp dụng ngay vào dự án.
1) Mô hình Client/Server &amp; giao thức Server mở port (ví dụ 8080), chấp nhận kết nối mới và tạo luồng đọc/ghi cho từng client. Client kết nối host:port, gửi thông điệp theo một quy ước (protocol) đơn giản để 2 bên hiểu nhau. Chọn delimiter (\n) hoặc length-prefix (gửi trước độ dài) để tránh dính/chia gói. 2) Ví dụ server tối giản (Java) import java.io.*; import java.net.*; public class EchoServer { public static void main(String[] args) throws Exception { try (ServerSocket ss = new ServerSocket(8080)) { System.out.println(&#34;Listening on 8080&#34;); while (true) { Socket s = ss.accept(); new Thread(() -&gt; handle(s)).start(); } } } static void handle(Socket s) { try (s; BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); PrintWriter out = new PrintWriter(s.getOutputStream(), true)) { String line; while ((line = in.readLine()) != null) { if (&#34;quit&#34;.equalsIgnoreCase(line)) break; out.println(&#34;echo:&#34; &#43; line); } } catch (IOException e) { e.printStackTrace(); } } } 3) Client import java.io.*; import java.net.*; public class EchoClient { public static void main(String[] args) throws Exception { try (Socket s = new Socket(&#34;127.0.0.1&#34;, 8080); BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); PrintWriter out = new PrintWriter(s.getOutputStream(), true)) { out.println(&#34;hello&#34;); System.out.println(in.readLine()); } } } 4) Checklist an toàn Timeout đọc/ghi; đóng tài nguyên với try-with-resources. Ghi log có request-id để trace. Định nghĩa rõ protocol từ đầu; có phiên bản (v1, v2) để nâng cấp. Best-practices nhanh Ghi log có cấu trúc (JSON) &#43; traceId. Timeout hợp lý cho connect/read/write; tổng timeout (deadline) khi cần. Chuẩn hoá lỗi cho client; đừng lộ stacktrace ra ngoài. Viết kiểm thử với trường hợp lỗi (timeout, 429, 5xx), không chỉ thành công. Checklist áp dụng Thiết kế protocol hoặc schema API rõ ràng. Thêm retry/backoff có điều kiện. Quan sát (metrics/log/trace) đầy đủ. Tài liệu hoá ví dụ request/response (hoặc mock contract). Kết luận Những nguyên tắc ở trên đủ để bạn triển khai và mở rộng trong bối cảnh dự án thực tế. Hãy clone lại ví dụ, chạy thử, thêm log và đo đạc; mọi tối ưu đều bắt đầu từ quan sát.">
  <meta property="og:locale" content="vi">
  <meta property="og:type" content="article">
    <meta property="article:section" content="blog">
    <meta property="article:published_time" content="2025-10-19T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-10-19T00:00:00+00:00">
    <meta property="article:tag" content="Java">
    <meta property="article:tag" content="Networking">
    <meta property="article:tag" content="TCP">
    <meta property="article:tag" content="Socket">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Java Socket TCP cơ bản: Client/Server và giao thức thông điệp đơn giản">
  <meta name="twitter:description" content="Bắt đầu với lập trình mạng bằng Java: tạo TCP server/client, quy ước thông điệp, xử lý đóng kết nối an toàn.
Từ khoá: Java, Networking, TCP, Socket.
Trong bài viết này, mình đi theo hướng thực chiến: giải thích ngắn gọn, kèm checklist, bẫy thường gặp và ví dụ code để bạn có thể áp dụng ngay vào dự án.
1) Mô hình Client/Server &amp; giao thức Server mở port (ví dụ 8080), chấp nhận kết nối mới và tạo luồng đọc/ghi cho từng client. Client kết nối host:port, gửi thông điệp theo một quy ước (protocol) đơn giản để 2 bên hiểu nhau. Chọn delimiter (\n) hoặc length-prefix (gửi trước độ dài) để tránh dính/chia gói. 2) Ví dụ server tối giản (Java) import java.io.*; import java.net.*; public class EchoServer { public static void main(String[] args) throws Exception { try (ServerSocket ss = new ServerSocket(8080)) { System.out.println(&#34;Listening on 8080&#34;); while (true) { Socket s = ss.accept(); new Thread(() -&gt; handle(s)).start(); } } } static void handle(Socket s) { try (s; BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); PrintWriter out = new PrintWriter(s.getOutputStream(), true)) { String line; while ((line = in.readLine()) != null) { if (&#34;quit&#34;.equalsIgnoreCase(line)) break; out.println(&#34;echo:&#34; &#43; line); } } catch (IOException e) { e.printStackTrace(); } } } 3) Client import java.io.*; import java.net.*; public class EchoClient { public static void main(String[] args) throws Exception { try (Socket s = new Socket(&#34;127.0.0.1&#34;, 8080); BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); PrintWriter out = new PrintWriter(s.getOutputStream(), true)) { out.println(&#34;hello&#34;); System.out.println(in.readLine()); } } } 4) Checklist an toàn Timeout đọc/ghi; đóng tài nguyên với try-with-resources. Ghi log có request-id để trace. Định nghĩa rõ protocol từ đầu; có phiên bản (v1, v2) để nâng cấp. Best-practices nhanh Ghi log có cấu trúc (JSON) &#43; traceId. Timeout hợp lý cho connect/read/write; tổng timeout (deadline) khi cần. Chuẩn hoá lỗi cho client; đừng lộ stacktrace ra ngoài. Viết kiểm thử với trường hợp lỗi (timeout, 429, 5xx), không chỉ thành công. Checklist áp dụng Thiết kế protocol hoặc schema API rõ ràng. Thêm retry/backoff có điều kiện. Quan sát (metrics/log/trace) đầy đủ. Tài liệu hoá ví dụ request/response (hoặc mock contract). Kết luận Những nguyên tắc ở trên đủ để bạn triển khai và mở rộng trong bối cảnh dự án thực tế. Hãy clone lại ví dụ, chạy thử, thêm log và đo đạc; mọi tối ưu đều bắt đầu từ quan sát.">

  
  <meta itemprop="name" content="Java Socket TCP cơ bản: Client/Server và giao thức thông điệp đơn giản">
  <meta itemprop="description" content="Bắt đầu với lập trình mạng bằng Java: tạo TCP server/client, quy ước thông điệp, xử lý đóng kết nối an toàn.
Từ khoá: Java, Networking, TCP, Socket.
Trong bài viết này, mình đi theo hướng thực chiến: giải thích ngắn gọn, kèm checklist, bẫy thường gặp và ví dụ code để bạn có thể áp dụng ngay vào dự án.
1) Mô hình Client/Server &amp; giao thức Server mở port (ví dụ 8080), chấp nhận kết nối mới và tạo luồng đọc/ghi cho từng client. Client kết nối host:port, gửi thông điệp theo một quy ước (protocol) đơn giản để 2 bên hiểu nhau. Chọn delimiter (\n) hoặc length-prefix (gửi trước độ dài) để tránh dính/chia gói. 2) Ví dụ server tối giản (Java) import java.io.*; import java.net.*; public class EchoServer { public static void main(String[] args) throws Exception { try (ServerSocket ss = new ServerSocket(8080)) { System.out.println(&#34;Listening on 8080&#34;); while (true) { Socket s = ss.accept(); new Thread(() -&gt; handle(s)).start(); } } } static void handle(Socket s) { try (s; BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); PrintWriter out = new PrintWriter(s.getOutputStream(), true)) { String line; while ((line = in.readLine()) != null) { if (&#34;quit&#34;.equalsIgnoreCase(line)) break; out.println(&#34;echo:&#34; &#43; line); } } catch (IOException e) { e.printStackTrace(); } } } 3) Client import java.io.*; import java.net.*; public class EchoClient { public static void main(String[] args) throws Exception { try (Socket s = new Socket(&#34;127.0.0.1&#34;, 8080); BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream())); PrintWriter out = new PrintWriter(s.getOutputStream(), true)) { out.println(&#34;hello&#34;); System.out.println(in.readLine()); } } } 4) Checklist an toàn Timeout đọc/ghi; đóng tài nguyên với try-with-resources. Ghi log có request-id để trace. Định nghĩa rõ protocol từ đầu; có phiên bản (v1, v2) để nâng cấp. Best-practices nhanh Ghi log có cấu trúc (JSON) &#43; traceId. Timeout hợp lý cho connect/read/write; tổng timeout (deadline) khi cần. Chuẩn hoá lỗi cho client; đừng lộ stacktrace ra ngoài. Viết kiểm thử với trường hợp lỗi (timeout, 429, 5xx), không chỉ thành công. Checklist áp dụng Thiết kế protocol hoặc schema API rõ ràng. Thêm retry/backoff có điều kiện. Quan sát (metrics/log/trace) đầy đủ. Tài liệu hoá ví dụ request/response (hoặc mock contract). Kết luận Những nguyên tắc ở trên đủ để bạn triển khai và mở rộng trong bối cảnh dự án thực tế. Hãy clone lại ví dụ, chạy thử, thêm log và đo đạc; mọi tối ưu đều bắt đầu từ quan sát.">
  <meta itemprop="datePublished" content="2025-10-19T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-10-19T00:00:00+00:00">
  <meta itemprop="wordCount" content="401">
  <meta itemprop="keywords" content="Java,Networking,TCP,Socket">

  
</head>
<body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-between md:justify-between gap-4 flex-wrap p-6 mx-auto relative">
  <a href="http://localhost:1313/" class="capitalize font-extrabold text-2xl">
    
    Blog Lập Trình Mạng
    
  </a>
  <button class="mobile-menu-button md:hidden">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <line x1="4" y1="8" x2="20" y2="8" />
      <line x1="4" y1="16" x2="20" y2="16" />
    </svg>
  </button>
  <ul class="mobile-menu absolute z-10 px-6 pb-6 md:p-0 top-full left-0 w-full md:w-auto md:relative hidden md:flex flex-col md:flex-row items-end md:items-center gap-4 lg:gap-6 bg-white dark:bg-gray-800">

    
    <li><a href="/">Home</a></li>
    
    <li><a href="/blog/">Blog</a></li>
    
    <li><a href="/about/">About</a></li>
    
    <li><a href="/portfolio/">Portfolio</a></li>
    
    <li><a href="/tags/">Tags</a></li>
    

    <li class="relative">
      <details class="group">
        <summary class="list-none cursor-pointer px-3 py-2 flex items-center gap-1 hover:opacity-80">
          Categories <span aria-hidden>▾</span>
        </summary>

        <div class="absolute mt-2 z-50 bg-white dark:bg-neutral-900 rounded-xl shadow-lg p-2 w-64 border border-neutral-200 dark:border-neutral-800">
          <ul class="max-h-72 overflow-auto">
            
            
            
              <li>
                <a class="block px-3 py-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800"
                  href="/categories/java/">
                  Java <span class="opacity-60">(10)</span>
                </a>
              </li>
            
              <li>
                <a class="block px-3 py-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800"
                  href="/categories/javascript/">
                  JavaScript <span class="opacity-60">(8)</span>
                </a>
              </li>
            
              <li>
                <a class="block px-3 py-2 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800"
                  href="/categories/general/">
                  General <span class="opacity-60">(1)</span>
                </a>
              </li>
            

            <li class="mt-1 border-t border-neutral-200 dark:border-neutral-800 pt-2">
              <a class="block px-3 py-2 text-sm opacity-80 hover:opacity-100" href="/categories/">Xem tất cả →</a>
            </li>
          </ul>
        </div>
      </details>
    </li>

    

    
    <li class="grid place-items-center">
      <span class="open-search inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="10" cy="10" r="7" />
          <line x1="21" y1="21" x2="15" y2="15" />
        </svg>
      </span>
    </li>
    

    
    <li class="grid place-items-center">
      <span class="toggle-dark-mode inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="3" />
          <line x1="12" y1="5" x2="12" y2="5.01" />
          <line x1="17" y1="7" x2="17" y2="7.01" />
          <line x1="19" y1="12" x2="19" y2="12.01" />
          <line x1="17" y1="17" x2="17" y2="17.01" />
          <line x1="12" y1="19" x2="12" y2="19.01" />
          <line x1="7" y1="17" x2="7" y2="17.01" />
          <line x1="5" y1="12" x2="5" y2="12.01" />
          <line x1="7" y1="7" x2="7" y2="7.01" />
        </svg>
      </span>
    </li>
    
  </ul>
</header>

<style>
  summary::-webkit-details-marker { display: none; }
</style><main class="flex-1">
  
  

  

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">Java Socket TCP cơ bản: Client/Server và giao thức thông điệp đơn giản</h1>
    
    <h5 class="text-sm flex items-center flex-wrap">
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="4" y="5" width="16" height="16" rx="2" />
        <line x1="16" y1="3" x2="16" y2="7" />
        <line x1="8" y1="3" x2="8" y2="7" />
        <line x1="4" y1="11" x2="20" y2="11" />
        <rect x="8" y="15" width="2" height="2" />
      </svg>
      Posted on October 19, 2025
      
        &nbsp;&bull;&nbsp;
      
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="9" />
        <polyline points="12 7 12 12 15 15" />
      </svg>
      2 minutes
      &nbsp;&bull;
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <line x1="3" y1="6" x2="3" y2="19" />
        <line x1="12" y1="6" x2="12" y2="19" />
        <line x1="21" y1="6" x2="21" y2="19" />
      </svg>
      401 words
      
        
      
    </h5>
    

    

    <p>
<figure class="my-6">
  <img
    src="/images/posts/java-socket-tcp-co-ban.svg"
    alt="minh họa"
    loading="lazy"
    class="mx-auto block ">
  
</figure></p>
<p>Bắt đầu với lập trình mạng bằng Java: tạo TCP server/client, quy ước thông điệp, xử lý đóng kết nối an toàn.</p>
<p><strong>Từ khoá:</strong> Java, Networking, TCP, Socket.<br>
Trong bài viết này, mình đi theo hướng <em>thực chiến</em>: giải thích ngắn gọn, kèm checklist, bẫy thường gặp và ví dụ code để bạn có thể áp dụng ngay vào dự án.</p>
<h2 id="1-mô-hình-clientserver--giao-thức">1) Mô hình Client/Server &amp; giao thức</h2>
<ul>
<li><strong>Server</strong> mở port (ví dụ 8080), chấp nhận kết nối mới và tạo luồng đọc/ghi cho từng client.</li>
<li><strong>Client</strong> kết nối <code>host:port</code>, gửi thông điệp theo một <strong>quy ước</strong> (protocol) đơn giản để 2 bên hiểu nhau.</li>
<li>Chọn <strong>delimiter</strong> (<code>\n</code>) hoặc <strong>length-prefix</strong> (gửi trước độ dài) để tránh dính/chia gói.</li>
</ul>
<h2 id="2-ví-dụ-server-tối-giản-java">2) Ví dụ server tối giản (Java)</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EchoServer</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> (ServerSocket ss <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ServerSocket(8080)) {
</span></span><span style="display:flex;"><span>      System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Listening on 8080&#34;</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">while</span> (<span style="color:#66d9ef">true</span>) {
</span></span><span style="display:flex;"><span>        Socket s <span style="color:#f92672">=</span> ss.<span style="color:#a6e22e">accept</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">new</span> Thread(() <span style="color:#f92672">-&gt;</span> handle(s)).<span style="color:#a6e22e">start</span>();
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">handle</span>(Socket s) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> (s;
</span></span><span style="display:flex;"><span>      BufferedReader in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(s.<span style="color:#a6e22e">getInputStream</span>()));
</span></span><span style="display:flex;"><span>      PrintWriter out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(s.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>)) {
</span></span><span style="display:flex;"><span>      String line;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">while</span> ((line <span style="color:#f92672">=</span> in.<span style="color:#a6e22e">readLine</span>()) <span style="color:#f92672">!=</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (<span style="color:#e6db74">&#34;quit&#34;</span>.<span style="color:#a6e22e">equalsIgnoreCase</span>(line)) <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>        out.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;echo:&#34;</span> <span style="color:#f92672">+</span> line);
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (IOException e) { e.<span style="color:#a6e22e">printStackTrace</span>(); }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="3-client">3) Client</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.*;
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.net.*;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">EchoClient</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) <span style="color:#66d9ef">throws</span> Exception {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> (Socket s <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Socket(<span style="color:#e6db74">&#34;127.0.0.1&#34;</span>, 8080);
</span></span><span style="display:flex;"><span>         BufferedReader in <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> BufferedReader(<span style="color:#66d9ef">new</span> InputStreamReader(s.<span style="color:#a6e22e">getInputStream</span>()));
</span></span><span style="display:flex;"><span>         PrintWriter out <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> PrintWriter(s.<span style="color:#a6e22e">getOutputStream</span>(), <span style="color:#66d9ef">true</span>)) {
</span></span><span style="display:flex;"><span>      out.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;hello&#34;</span>);
</span></span><span style="display:flex;"><span>      System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(in.<span style="color:#a6e22e">readLine</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="4-checklist-an-toàn">4) Checklist an toàn</h2>
<ul>
<li>Timeout đọc/ghi; đóng tài nguyên với <code>try-with-resources</code>.</li>
<li>Ghi log có <strong>request-id</strong> để trace.</li>
<li>Định nghĩa rõ <strong>protocol</strong> từ đầu; có phiên bản (v1, v2) để nâng cấp.</li>
</ul>
<h2 id="best-practices-nhanh">Best-practices nhanh</h2>
<ul>
<li>Ghi log có cấu trúc (JSON) + traceId.</li>
<li>Timeout hợp lý cho connect/read/write; tổng timeout (deadline) khi cần.</li>
<li>Chuẩn hoá lỗi cho client; đừng lộ stacktrace ra ngoài.</li>
<li>Viết kiểm thử với trường hợp <strong>lỗi</strong> (timeout, 429, 5xx), không chỉ thành công.</li>
</ul>
<h2 id="checklist-áp-dụng">Checklist áp dụng</h2>
<ul>
<li><input disabled="" type="checkbox"> Thiết kế protocol hoặc schema API rõ ràng.</li>
<li><input disabled="" type="checkbox"> Thêm retry/backoff có điều kiện.</li>
<li><input disabled="" type="checkbox"> Quan sát (metrics/log/trace) đầy đủ.</li>
<li><input disabled="" type="checkbox"> Tài liệu hoá ví dụ request/response (hoặc mock contract).</li>
</ul>
<h2 id="kết-luận">Kết luận</h2>
<p>Những nguyên tắc ở trên đủ để bạn triển khai và mở rộng trong bối cảnh dự án thực tế. Hãy clone lại ví dụ, chạy thử, thêm log và đo đạc; mọi tối ưu đều bắt đầu từ quan sát.</p>
<div class="mt-10 flex flex-col gap-4">

  
  
  <div class="flex flex-wrap items-center gap-2">
    <span class="text-sm opacity-70">Categories:</span>
    
      
      
        <a href="/categories/java/"
           class="px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition text-sm">
          Java
        </a>
      
    
  </div>
  

  
  
  <div class="flex flex-wrap items-center gap-2">
    <span class="text-sm opacity-70">Tags:</span>
    
      
      
        <a href="/tags/java/"
           class="px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition text-sm">
          #Java
        </a>
      
    
      
      
        <a href="/tags/networking/"
           class="px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition text-sm">
          #Networking
        </a>
      
    
      
      
        <a href="/tags/tcp/"
           class="px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition text-sm">
          #TCP
        </a>
      
    
      
      
        <a href="/tags/socket/"
           class="px-3 py-1 rounded-full bg-neutral-100 dark:bg-neutral-800 hover:bg-neutral-200 dark:hover:bg-neutral-700 transition text-sm">
          #Socket
        </a>
      
    
  </div>
  

</div></article><div class="bg-blue-200 dark:bg-gray-900">
  <div class="container px-4 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
    <div>
      <div class="text-2xl font-bold mb-2"></div>
      <p class="opacity-60"></p>
      
    </div>

    <ul class="flex justify-center gap-x-3 flex-wrap gap-y-2">
      
    </ul>
  </div>
</div>

    </main><footer class="container p-6 mx-auto flex justify-between items-center">
  <span class="text-sm font-light">
    
    2025 © Blog Lập Trình Mạng
    
  </span>
  <span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="p-1 cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M18 15l-6 -6l-6 6h12" />
    </svg>
  </span>
</footer>

<div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden">
  <div class="container max-w-3xl mx-auto p-12">
    <div class="relative">
      <div class="my-4 text-center text-2xl font-bold">Search</div>

      <span class="p-2 absolute right-0 top-0 cursor-pointer close-search">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
    </div>

    <input type="search" class="py-2 px-3 w-full dark:text-black border dark:border-transparent"
      placeholder="Enter search query" />

    <div class="search-results text-lg font-medium my-4 hidden">Results</div>
    <ul class="search-list my-2">

    </ul>

    <div class="no-results text-center my-8 hidden">
      <div class="text-xl font-semibold mb-2">No results found</div>
      <p class="font-light text-sm">Try adjusting your search query</p>
    </div>
  </div>
</div>





<script src="http://localhost:1313/js/scripts.min.js"></script>







<script>
  
  const darkmode = document.querySelector('.toggle-dark-mode');
  function toggleDarkMode() {
    if (document.documentElement.classList.contains('dark')) {
      document.documentElement.classList.remove('dark')
      localStorage.setItem('darkmode', 'light')
    } else {
      document.documentElement.classList.add('dark')
      localStorage.setItem('darkmode', 'dark')
    }
  }
  if (darkmode) {
    darkmode.addEventListener('click', toggleDarkMode);
  }

  const darkStorage = localStorage.getItem('darkmode');
  const isBrowserDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (!darkStorage && isBrowserDark) {
    document.documentElement.classList.add('dark');
  }

  if (darkStorage && darkStorage === 'dark') {
    toggleDarkMode();
  }
</script>


<script>
  const mobileMenuButton = document.querySelector('.mobile-menu-button')
  const mobileMenu = document.querySelector('.mobile-menu')
  function toggleMenu() {
    mobileMenu.classList.toggle('hidden');
    mobileMenu.classList.toggle('flex');
  }
  if(mobileMenu && mobileMenuButton){
    mobileMenuButton.addEventListener('click', toggleMenu)
  }
</script>
</body>
</html>
