{{ define "main" }}
<section class="container mx-auto p-6">
  <h1 class="text-3xl font-bold mb-6">{{ .Title }}</h1>
  {{ with .Content }}<div class="prose dark:prose-invert mb-8">{{ . }}</div>{{ end }}

  <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
    {{ range .Pages.ByDate.Reverse }}
      <article class="rounded-xl overflow-hidden border border-neutral-200 dark:border-neutral-800 hover:shadow-lg transition">
        {{ $cover := .Resources.GetMatch "cover*" }}
        {{ if $cover }}
          <a href="{{ .RelPermalink }}"><img src="{{ $cover.RelPermalink }}" alt="{{ .Title }}" class="w-full h-44 object-cover"></a>
        {{ end }}
        <div class="p-4">
          <h2 class="text-xl font-semibold"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          {{ with .Params.summary }}<p class="opacity-80 mt-1">{{ . }}</p>{{ end }}
          {{ with .Params.tech }}
          <div class="mt-3 flex flex-wrap gap-2">
            {{ range . }}<span class="px-2 py-1 text-xs rounded-full bg-neutral-100 dark:bg-neutral-800">{{ . }}</span>{{ end }}
          </div>
          {{ end }}
        </div>
      </article>
    {{ end }}
  </div>
</section>
{{ end }}
